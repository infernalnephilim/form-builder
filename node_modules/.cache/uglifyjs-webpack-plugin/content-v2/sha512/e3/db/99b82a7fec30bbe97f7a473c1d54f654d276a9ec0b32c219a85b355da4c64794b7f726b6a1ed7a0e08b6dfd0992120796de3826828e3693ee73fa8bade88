{"code":"webpackHotUpdate(0,{27:function(e,n){var t;const o=\"questionList-indexeddb\",s=1,i=\"questions\";var r=[],l=1,u=document.getElementById(\"form-builder\"),c=document.getElementById(\"add-input\");const a=document.getElementsByClassName(\"result\")[0];function d(){return\"indexedDB\"in window&&!/iPad|iPhone|iPod/.test(navigator.platform)}function p(e){var n=f(i,\"readwrite\"),t=n.clear();t.onsuccess=function(e){console.log(\"Store cleared\"),g(n)},t.onerror=function(e){console.error(\"clearObjectStore:\",e.target.errorCode),console.log(this.error)}}function f(e,n){return t.transaction(e,n).objectStore(e)}function g(e){var n;console.log(\"getResult\"),void 0===e&&(e=f(i,\"readwrite\")),(n=e.getAll()).onsuccess=function(e){r=n.result,console.log(r),function e(n,t){t+=1;for(let o=0,s=n.length;o<s;o++)n[o].id>l&&(l=n[o].id+1),u.insertBefore(m(n[o],t),c),n[o].subquestions.length>0&&e(n[o].subquestions,t)}(r,0)},n.onerror=function(e){console.error(\"add error\",this.error),console.log(this.error)}}function b(e,n,t,o,s){return l++,{id:e,condition:n,conditionAnswer:t,question:o,type:s,subquestions:[]}}function m(e,n){var o=document.createElement(\"div\");o.setAttribute(\"id\",e.id),o.classList.add(\"question-wrapper-div\"),o.style.marginLeft=20*(n-1)+\"px\";var s='<ul class=\"question-wrapper\">';\"\"!=e.condition&&(s+='<li class=\"form-row\">\\n          <label class=\"item\">Condition</label>\\n          <select class=\"condition-type item flex-1\">\\n            <option>\\n              Equals\\n            </option>\\n',\"Number\"==e.type&&(s+=\"            <option>\\n              Greater than\\n            </option>\\n            <option>\\n              Less Than\\n            </option>\\n\"),s+=\"          </select>\\n\",\"Text\"==e.type||\"Number\"==e.type?s+='<input class=\"condition-text flex-1\" type=\"text\" value=\\''+e.conditionAnswer+\"'/>\\n\":s+='          <select class=\"condition-yesno item flex-1\">\\n            <option selected>\\n              Yes\\n            </option>\\n            <option>\\n              No\\n            </option>\\n          </select>\\n',s+=\"        </li>\"),s+='<li class=\"form-row\">\\n          <label class=\"item\">Question</label>\\n          <input class=\"question-input text item\" name=\"question[]\" value=\\''+e.question+'\\'/>\\n        </li>\\n        <li class=\"form-row\">\\n          <label class=\"item\">Type</label>\\n          <select class=\"select-type item\">\\n',\"Yes/No\"==e.type?s+=\"<option selected>\\n              Yes/No\\n            </option>\\n            <option>\\n              Text\\n            </option>\\n            <option>\\n              Number\\n            </option>\\n\":\"Text\"==e.type?s+=\"<option>\\n              Yes/No\\n            </option>\\n            <option selected>\\n              Text\\n            </option>\\n            <option>\\n              Number\\n            </option>\\n\":\"Number\"==e.type&&(s+=\"<option>\\n              Yes/No\\n            </option>\\n            <option>\\n              Text\\n            </option>\\n            <option selected>\\n              Number\\n            </option>\\n\"),s+='</select>\\n        </li>\\n        <li class=\"form-row\">\\n          <button class=\"add-sub-input\">Add Sub-Input</button>\\n          <button class=\"delete-input\">Delete</button>\\n        </li>        </ul>',o.innerHTML=s,o.getElementsByClassName(\"add-sub-input\")[0].addEventListener(\"click\",t=>{let s=o.getElementsByClassName(\"add-sub-input\")[0].parentNode.parentNode.parentNode;t.preventDefault();let i=\"\";\"Yes/No\"==e.type&&(i=\"Yes\");var c=b(l,\"Equals\",i,\"\",e.type);e.subquestions.push(c),console.log(e.id),u.insertBefore(m(c,n+1),s.nextSibling),a.textContent=JSON.stringify(r,null,\"  \")}),o.getElementsByClassName(\"delete-input\")[0].addEventListener(\"click\",o=>{o.preventDefault(),function e(n){if(n.subquestions.length>0){for(let t=0;t<n.subquestions.length;t++)e(n.subquestions[t]),a.textContent=JSON.stringify(r,null,\"  \");n.subquestions=[]}document.getElementById(n.id).remove()}(e),r=function e(n,o,s){!function(e,n){console.log(\"getResult\"),void 0===e&&(e=f(i,\"readwrite\")),e.delete(n).onsuccess=function(e){console.log(\"USUNAL\")}}(t.store,o);return n.filter(function(n){return n.subquestions.length>0&&(n.subquestions=e(n.subquestions,o,s)),a.textContent=JSON.stringify(r,null,\"  \"),n.id!==o})}(r,e.id,n),a.textContent=JSON.stringify(r,null,\"  \")});var c=o.getElementsByTagName(\"input\");if(c.length>0)for(let e=0;e<c.length;e++)c[e].addEventListener(\"change\",()=>{let n=c[e].parentNode.parentNode.parentNode.id;v(r,c[e],n)},!1);var d=o.getElementsByTagName(\"select\");if(d.length>0)for(let e=0;e<d.length;e++)d[e].addEventListener(\"change\",()=>{let n=d[e].parentNode.parentNode.parentNode.id;v(r,d[e],n)});return o}function v(e,n,t){for(let o=0,s=e.length;o<s;o++){if(e[o].id==t)return n.classList.contains(\"condition-type\")?e[o].condition=n.value:n.classList.contains(\"condition-text\")?e[o].conditionAnswer=n.value:n.classList.contains(\"condition-yesno\")?e[o].conditionAnswer=n.value:n.classList.contains(\"question-input\")?e[o].question=n.value:n.classList.contains(\"select-type\")&&(e[o].type=n.value),void(a.textContent=JSON.stringify(r,null,\"  \"));e[o].subquestions.length>0&&v(e[o].subquestions,n,t)}}d?function(){console.log(\"openDb ...\");var e=indexedDB.open(o,s);e.onsuccess=function(e){t=this.result,console.log(\"openDb DONE\"),g(t.store),document.getElementById(\"save-data\").addEventListener(\"click\",e=>{e.preventDefault(),function(e,n){console.log(\"saveAllChanges\"),p(t.store),void 0===e&&(e=f(i,\"readwrite\")),e.getAll().onsuccess=function(t){var o=t.target.result;if(console.log(o),n.length>0)for(let e=0;e<o.length;e++)o.push(n[e]),console.log(n[e]);var s=e.put(o);s.onerror=function(e){},s.onsuccess=function(e){}}}(t.store,r)}),p(t.store)},e.onerror=function(e){console.error(\"openDb:\",e.target.errorCode)},e.onupgradeneeded=function(e){console.log(\"openDb.onupgradeneeded\");var n=e.currentTarget.result.createObjectStore(i,{keyPath:\"id\",autoIncrement:!0});n.createIndex(\"id\",\"id\",{unique:!0}),n.createIndex(\"conditionAnswer\",\"conditionAnswer\",{unique:!1}),n.createIndex(\"condition\",\"condition\",{unique:!1}),n.createIndex(\"question\",\"question\",{unique:!1}),n.createIndex(\"type\",\"type\",{unique:!1}),n.createIndex(\"subquestions\",\"subquestions\",{unique:!1})}}():window.alert(\"Your browser doesn't support a stable version of IndexedDB.\"),c.addEventListener(\"click\",e=>{e.preventDefault();let n=b(l,\"\",\"\",\"\",\"Yes/No\");u.insertBefore(m(n,1),c),r.push(n),a.textContent=JSON.stringify(r,null,\"  \"),d&&function(e,n){console.log(\"getResult\"),void 0===e&&(e=f(i,\"readwrite\")),e.put(n)}(t.store,n),l++}),a.textContent=JSON.stringify(r,null,\"  \")}});","extractedComments":[]}